{"name":"Codeigniter-model","tagline":"CodeIgniter Model is an extended class for CI_Model, it allows you to manipulate CRUD operations in an easy way. It support multilang and relations between tables.","body":"# CodeIgniter Model Class\r\n\r\nCodeIgniter Model is an extended class for CI_Model, it allows you to manipulate CRUD operations in an easy way.\r\nIt support multilang and relations between tables.\r\n\r\n# Installation\r\n\r\nCodeIgniter Versoin >= 2.x.x\r\n\r\n\r\nCopy the file `MY_Model.php` to the `application/core/` folder.\r\n\r\n# Usage\r\n\r\nCreate a Model that extends from MY_Model and set the variables :\r\n\r\n```php\r\nprotected $table = 'my_table';\r\n\r\nprotected $identifier = 'id_my_table';\r\n\r\nprotected $foreign_key = 'my_table_id';\r\n\r\nprotected $fields = array(\r\n    'field_1',\r\n    'field_2',\r\n);\r\n```\r\n# Example\r\nAssuming that we have 2 tables advertisement and category, each advertisement belongs to a category, so a category can have\r\none or many advertisements, which means our tables may look like this :\r\n\r\nNOTES :\r\n  - The category table has multilang fields so we're gonna put them in category_lang table\r\n  - {table}_lang must respect the recommended structure\r\n\r\n -----------------------\r\n| category              |\r\n -----------------------\r\n| id_category (int)     |\r\n| parent (int)          |\r\n| created_at (datetime) |\r\n| updated_at (datetime) |\r\n -----------------------\r\n -----------------------\r\n| category_lang         |\r\n -----------------------\r\n| category_id (int)     |\r\n| lang_id (int)         |\r\n| title (varchar)       |\r\n| description (varchar) |\r\n -----------------------\r\n -----------------------\r\n| advert                |\r\n -----------------------\r\n| id_advert (int)       |\r\n| category_id (int)     |\r\n| title (int)           |\r\n| description (int)     |\r\n| deleted (tinyInt)     |\r\n| created_at (datetime) |\r\n| updated_at (datetime) |\r\n -----------------------\r\n\r\n## Fetch records\r\nAfter that, you can call the Model within your controller for instance like following :\r\n\r\n```php\r\n// Return all records\r\n$this->load->model('New_model');\r\n$records = $this->New_model->get_all();\r\nvar_dump($records);\r\n\r\n// Return record with id=10\r\n$record = $this->New_model->get(10);\r\nvar_dump($record);\r\n``\r\n\r\n## Fetch records with criteria\r\n```php\r\n// You can also add some criteria like following :\r\n$criteria = array();\r\n$criteria[] = array('title', 'like', 'test');\r\n$criteria[] = array('id_my_table', '=', 10);\r\n\r\n$result = $this->New_model->get_all($criteria);\r\n                \r\nvar_dump($result);\r\n```\r\n\r\n## Fetch record with association\r\n```php\r\n$result = $this->Advert_model\r\n                ->with('category')\r\n                ->order_by('created_at', 'DESC')\r\n                ->get_all($criteria);\r\n                \r\nvar_dump($result);\r\n\r\n$result = $this->Category_model\r\n                ->with('advert')\r\n                ->get_all();\r\n                \r\nvar_dump($result);\r\n```\r\n\r\n## Fetch records with multiple associations\r\n```php\r\n$result = $this->Advert_model\r\n                ->with('category')\r\n                ->with('alias_2')\r\n                ->with('alias_3')\r\n                ->order_by('created_at', 'DESC')\r\n                ->get_all($criteria);\r\n                \r\nvar_dump($result);\r\n```\r\n\r\n## Fetch records with filter on the associations\r\n```php\r\n$filter = array();\r\n$filter[] = array('lang_id', '=', 2);\r\n$result = $this->Advert_model\r\n                ->with('category', $filter)\r\n                ->with('alias_2')\r\n                ->with('alias_3')\r\n                ->order_by('created_at', 'DESC')\r\n                ->get_all($criteria);\r\n                \r\nvar_dump($result);\r\n```\r\n\r\n## Fetch records with pagination\r\n```php\r\n$page = 1;\r\n$total_items_per_page = 100;\r\n$records = $this->Advert_model\r\n                ->limit($total_items_per_page, $page)\r\n                ->order_by('created_at', 'DESC')\r\n                ->get_all($criteria);\r\n\r\n$total_records = $this->Advert_model->count_all_results();\r\nvar_dump($records);\r\n```\r\n\r\n## Add new record\r\n```php\r\n$data = array(\r\n  'title' => 'New Advertisement',\r\n  'description' => 'New Advertisement',\r\n  'deleted' => 0,\r\n  'category_id' => 23,\r\n);\r\n$this->Advert_model->save($data);\r\n```\r\n\r\n## Update record\r\n```php\r\n$id_record = 10;\r\n$data = array(\r\n  'title' => 'Update Advertisement',\r\n  'description' => 'Update Advertisement',\r\n  'deleted' => 0,\r\n  'category_id' => 23,\r\n);\r\n$this->Advert_model->save($data, $id_record);\r\n```\r\n\r\n## Delete record\r\n```php\r\n$id_record = 10;\r\n$this->Advert_model->delete($id_record);\r\n```","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}